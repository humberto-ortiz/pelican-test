title: Semantic analysis
date: 2016-04-12
category: Teaching
tags: hacking, learning
slug: teaching/compilers2016/semantic

## Description

I have provided a parser for a subset of tiger that includes 

	exp:
		lvalue
		nil
		int
		string
		exp + exp
		exp - exp
		exp * exp
		exp / exp
		lvalue := exp
		let declist in exps end

	lvalue:
		id

	declist:
		dec
		dec declist
		
	dec: 
		type typeid = typeid
		var id : typeid := exp

	exps:
		exp ; exps

Your assignment is to write a set of mutually recursive functions that
type check the abstract syntax tree generated by the parser. Chapter 5
of the textbook describes the functions. The sample code provides a
few of the functions you should use.

Programs that typecheck correctly should return unit. Programs that
fail should return an appropriate error message with ErrorMsg.error.

## Example code

The example code is in the [github][] repository. Look at the
`tiger/semant.sml` file.

[github]: https://github.com/humberto-ortiz/compilers-2015

You can run the semantic analysis as follows:

	- CM.make "sources.cm";
	
	- Semant.transProg (Parse.parse "let.tig");
	let.tig0.0:Can't typecheck this yet
	val it = () : unit

When you complete your assignment, this should instead complain about
not having an integer.

## Extra credit

Add the rules for function declarations and function calls and the
remaining binops to the grammar as in
[the prior assignment](subset.md), and generate the correct AST, then
typecheck a program with functions.
